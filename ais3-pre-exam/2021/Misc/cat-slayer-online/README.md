# Cat Slayer | Online Edition / Misc (387pts)

`nc quiz.ais3.org 22222`

- `game.py`：主遊戲邏輯，不預期玩家去閱讀，但真的想讀就去讀吧，被看到 Spaghetti Code 好害羞 ><
- `sandbox.py`：咒文（spell）執行處，預期玩家能只能在此達成 RCE，**可以讀這個就好**。
- `pow.py`：進入遊戲時需要 proof of work 驗證，歡迎使用此腳本。

---

### 玩法解說

⚠️ 只有在返回目錄、戰敗或殺死玩家時遊戲才會存檔。

#### TL;DR

**請直接去玩。**
<img src="https://imgur.com/LxAiTmK.gif" style="width:100%">

---

#### 基礎規則

0. 咒文（spell）會被傳進 Python 的 `eval(...)` 中，試著做到 RCE 取得 flag 吧！
1. 與貓咪🐱戰鬥以獲得金幣，若戰鬥失敗則所有金幣歸零，並使攻擊/防禦力減半
2. 金幣可用來回血、升級攻擊/防禦力，或解鎖 spell 可用字元（遊戲中稱之為解除詛咒）
3. 「挑戰成功的最高等級（以下簡稱為 lv.）」越高則 spell 可用長度越長；另一方面，解除的 curse 越多會使 spell 可用長度減少（詳見公式）
4. lv.10 之後可以轉生（rebirth），所有數值將會重設成初始值，但可以解除 spell 長度限制及特殊詛咒。

#### 玩家對戰

1. 達到 lv.3 之後可以殺死等級不少於自己一級玩家，成功可獲得對方玩家所有屬性值；若失敗與普通戰敗相同，且對方玩家不受任何影響
2. 殺人後有 15 分鐘的冷卻時間，此段時間內不得再度殺人。
3. 被其他玩家殺死後**帳號永久封鎖**
4. 殺死普通玩家會被標記為**紅色**，殺死紅色玩家則維持原狀。

#### 戰鬥細節

0. 造成的傷害為 `攻方的攻擊力-防方的防禦力`
1. 戰鬥時若`防禦力 > 攻擊力`則防禦成功，但仍能造成 **lv** 點的傷害
2. 與貓咪🐱戰鬥時一律由貓咪先攻，每回合貓咪🐱的攻擊與防禦數值都會隨機在一定範圍內生成，而非固定不變
3. 若與單隻貓咪🐱戰鬥超過二十回合仍未分出勝負，則我方戰敗。
4. 試圖殺死其他玩家時有一定機率會被對方發現，若被發現則為對方先攻，反之則是我方先攻。

#### 公式

- 解咒價格：解除第 n 個 curse，需耗費 `22*n*2**(n+2)+22*n+22` 元
- 可用 spell 長度：`lv * int(2/math.log10(max(2, 已解咒數量-10))*6)` 個字元


Author: splitline